(function(n){app.modals.CreateOrEditUserModal=function(){function r(){var i=[];return t.getModal().find(".user-role-checkbox-list input[type=checkbox]").each(function(){n(this).is(":checked")&&i.push(n(this).attr("name"))}),i}var u=abp.services.app.user,t,i=null,f=new app.PasswordComplexityHelper;this.init=function(u){t=u;i=t.getModal().find("form[name=UserInformationsForm]");i.validate();var e=t.getModal().find("input[name=Password],input[name=PasswordRepeat]"),o=e.closest(".form-group");f.setPasswordComplexityRules(e,window.passwordComplexitySetting);n("#EditUser_SetRandomPassword").change(function(){n(this).is(":checked")?(o.slideUp("fast"),t.getArgs().id||e.removeAttr("required")):(o.slideDown("fast"),t.getArgs().id||e.attr("required","required"))});t.getModal().find(".user-role-checkbox-list input[type=checkbox]").change(function(){n("#assigned-role-count").text(r().length)});t.getModal().find("[data-toggle=tooltip]").tooltip()};this.save=function(){if(i.valid()){var f=r(),n=i.serializeFormToObject();n.SetRandomPassword&&(n.Password=null);t.setBusy(!0);u.createOrUpdateUser({user:n,assignedRoleNames:f,sendActivationEmail:n.SendActivationEmail,SetRandomPassword:n.SetRandomPassword}).done(function(){abp.notify.info(app.localize("SavedSuccessfully"));t.close();abp.event.trigger("app.createOrEditUserModalSaved")}).always(function(){t.setBusy(!1)})}}}})(jQuery);